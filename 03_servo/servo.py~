import RPi.GPIO as GPIO
import time

GPIO.setmode(GPIO.BCM)

pinServo = 18
pinDiode = 21

GPIO.setup(pinDiode, GPIO.OUT)
GPIO.setup(pinServo, GPIO.OUT)

frequentzy_hertz = 50
pwm = GPIO.PWM(pinServo, frequentzy_hertz)

left_pos = 0.4
right_pos = 2.5
mid_pos = (right_pos - left_pos) / 2 + left_pos

positionList = [left_pos, mid_pos, right_pos, right_pos]

ms_per_cycle = 1000 / frequentzy_hertz


#print "Servo is attached to GPIO: " + str(pinServo)
#print "Diode is attached to GPIO: " + str(pinDiode)
for i in range(3):
	for position in positionList:
		duty_cycle_percentage = position * 100 / ms_per_cycle
		print("Position: "+ str(position))
		print("Duty cycle: "+ str(duty_cycle_percentage) +"\n")
		pwm.start(duty_cycle_percentage)
		time.sleep(.5)

pwm.stop()
GPIO.cleanup()

'''try:
	while True:
		print "ON"
#		GPIO.output(pinServo,135)
		GPIO.output(pinDiode,1)
		time.sleep(0.0015)
		print "OFF"
#		GPIO.output(pinServo,0)
		GPIO.output(pinDiode,0)
		time.sleep(2)

except KeyboardInterrupt:
	GPIO.cleanup()
'''
